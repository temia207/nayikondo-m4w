<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9
                  http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">

	<changeSet author="victor (generated)" id="remove-columns-for-functionality" >
		<dropColumn tableName="water_user_committee" columnName="collect_fees" />
		<dropColumn tableName="water_user_committee" columnName="regular_service" />
		<dropColumn tableName="water_user_committee" columnName="regular_meeting" />
	</changeSet>
	<changeSet author="vkakama@gmail.com" id="remove-date-foreign-key" >
		<dropPrimaryKey tableName="water_functionality" constraintName="date"/>
	</changeSet>
	<changeSet author="vkakama@gmail.com" id="add-contact-of-assessor-2-4-2011" >
		<addColumn tableName="fault_assessment">
			<column name="assessor_tel" type="varchar(255)"/>
		</addColumn>
	</changeSet>
	<changeSet id="add_uuid_water_functionality" author="kay"  >
		<preConditions onFail="MARK_RAN">
			<not>
				<columnExists tableName="water_functionality" columnName="id"/>
			</not>
		</preConditions>
		<addColumn tableName="water_functionality">
			<column name="id" type="varchar(200)"/>
		</addColumn>
		<sql>
			update water_functionality set id=(uuid())
		</sql>
		<addPrimaryKey tableName="water_functionality" columnNames="id"/>
	</changeSet>
</databaseChangeLog>